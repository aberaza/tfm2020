% diagramas simples
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}
\usepackage{tikz-uml}
\tikzumlset{fill class=white!20, fill template=white!15,font=\bfseries\footnotesize}

%%% Definiciones para diagramas flowchart
\tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=red!30]
\tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium right angle=110, minimum width=2cm, minimum height=1cm, text centered, draw=black, fill=blue!30]
\tikzstyle{process} = [rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=orange!30]
\tikzstyle{decision} = [diamond, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=green!30]
\tikzstyle{arrow} = [thick,->,>=stealth]

% Notas en las tablas
\usepackage[flushleft]{threeparttable}

%Fancy maths
%\usepackage{mathpazo}
%%% Subfiguras
%\usepackage{subfigure} % deprecated y rompe algo
%\usepackage{caption}
% \usepackage{subcaption} % conflicto con subfig
% mirar paquete subfig


%\digura{scale}{image}{fig:id}{Titulo}

\newcommand\figura[4][0.7]{
  \def\scale{#1}
  \def\graphname{#2}
  \def\texfigure{img/#2.tex}
  \def\pgffigure{img/#2.pgf}
  \def\figid{#3}
  \def\captiontext{#4}
    \begin{figure}[!ht]
        \centering
        \IfFileExists{\texfigure}{
          \includestandalone{\graphname}
        }{
            \IfFileExists{\pgffigure}{
                \input{\pgffigure}
                %\includestandalone{\pgffigure}
                %\includegraphics[width=0.9\textwidth]{\pgffigure}
           }{
               \includegraphics[scale=\scale]{\graphname}
           }
        }
        \caption{\label{\figid} \captiontext}
    \end{figure}
}

% SOME HELPERS
\newcommand\pTabularContent[2]{
  \begin{tabular}{@{}#1@{}}
    \toprule
    #2
    \bottomrule
  \end{tabular}
}

\newcommand\pTableNotes[1]{
  \begin{tablenotes}
    \small
    #1
  \end{tablenotes}
}
\newcommand\tablan[6][\linewidth]{
  \def\myscale{#1}
  \def\mytableid{#2}
  \def\mycaptiontext{#3}
  \def\mycolumnstyles{#4}
  \def\mytablecontent{#5}
  \def\tablenote{#6}

  \begin{table*}
    \centering
    \resizebox{\myscale}{!}{
      \begin{threeparttable}
        \begin{tabular}{@{}#4@{}}
          \toprule
          #5
          \bottomrule
        \end{tabular}

        \begin{tablenotes}
          \small
          #6
        \end{tablenotes}
      \end{threeparttable}
    }
  \caption{\label{\mytableid} \mycaptiontext}
  \end{table*}
}

% \tabla{tab:id}{Título tabla}{lcccl}{ la tala propiamente dicha}
\newcommand\tabla[5][\linewidth]{
\begin{table*}
    \centering
    \resizebox{#1}{!}{
        \begin{tabular}{@{}#4@{}}
            \toprule
        #5
            \bottomrule
        \end{tabular}
    }
    \caption{\label{#2} #3}
\end{table*}
}

% \tablas{tab:id}{Título tabla}{lcccl}{ la tabla propiamente dicha }
\newcommand\tablas[5][1]{
\begin{table*}
    \centering
    \scalebox{#1}{
        \begin{tabular}{@{}#4@{}}
            \toprule
        #5
            \bottomrule
        \end{tabular}
    }
    \caption{\label{#2} #3}
\end{table*}
}


\newcommand\tablav[4]{
\begin{sidewaystable*}
    \centering
    \resizebox{\linewidth}{!}{
        \begin{tabular}{@{}#3@{}}
            \toprule
        #4
            \bottomrule
        \end{tabular}
    }
    \caption{\label{#1} #2}
\end{sidewaystable*}
}
\newcommand{\tabitem}{~~\llap{\textbullet}~~}
% Texto citado
\usepackage[autostyle=true,spanish=spanish]{csquotes}
\newcommand{\cita}[2][]{\textquote[{#1}]{#2}}

%%% ToDo notes
\usepackage{xargs}                      % Use more than one optional parameter in a new commands
%\usepackage[pdftex,dvipsnames]{xcolor}  % Coloured text etc.
\usepackage[spanish,obeyFinal,colorinlistoftodos,textsize=tiny]{todonotes} % para desactivar usar diable

%\newcommandx{\info}[2][1=]{\todo[linecolor=OliveGreen,backgroundcolor=OliveGreen!25,bordercolor=OliveGreen,#1]{#2}}
\newcommand{\info}[1]{\todo[inline,linecolor=OliveGreen,backgroundcolor=OliveGreen!25,bordercolor=OliveGreen]{#1}}
\newcommandx{\warn}[2][1=]{\todo[inline, size=large, linecolor=Plum,backgroundcolor=Plum!25,bordercolor=Plum,#1]{#2}}
\newcommand{\todofig}[5][1]{
  \def\scale{#1}
  \def\graphname{#2}
  \def\figid{#3}
  \def\captiontext{#4}
    \begin{figure}[!ht]
        \centering
        \missingfigure{TODO}
        \caption{\label{\figid} \captiontext}
    \end{figure}
}
\newcommandx{\todohide}[2][1=]{\todo[disable,#1]{#2}}

